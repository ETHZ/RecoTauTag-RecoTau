#! /bin/env cmsRun
process myTauTagAnalyzer = {  
  service = AdaptorConfig {}
  source = PoolSource{
    untracked vstring fileNames = { 	
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/0CE5ECE9-BB3E-DC11-9D5E-001617C3B6B8.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/203A0D3C-9A3E-DC11-8460-0030485628AC.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/2C2ADB30-9A3E-DC11-925D-003048562A96.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/3CF38400-A23E-DC11-88EE-001617C3B78C.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/50869938-9A3E-DC11-9D51-00304856288E.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/5AF1CDDE-9A3E-DC11-BBE6-000423D94D2C.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/6ECB2C9D-A33E-DC11-A6A3-000E0C3F08CC.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/A40F131F-9E3E-DC11-AD05-001617C3B73A.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/C49DE549-A73E-DC11-AFFE-001617C3B710.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/D889F97D-A03E-DC11-9F28-001617E30F56.root',
      'rfio:/castor/cern.ch/cms/store/RelVal/2007/7/30/RelVal-RelVal160pre6Z-TT-1185791935/0000/D8BF0A08-9D3E-DC11-80A6-000423D67562.root'
    }
  }
  untracked PSet maxEvents = {untracked int32 input = -1}

  include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"

  # Message Logger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff"
  include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
  include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
       
  include "RecoTauTag/CombinedTauTag/data/coneIsolation.cfi"
  include "RecoTauTag/CombinedTauTag/data/combinedTauTag.cfi"
  ### Begin - config of Conditions DB (where PDFs used to compute a likelihood ratio are stored)###
  include "CondCore/DBCommon/data/CondDBCommon.cfi"

  # (a) sq lite file 
  #replace CondDBCommon.connect = "sqlite_file:tautagnew1.db"  
  #replace CondDBCommon.catalog = "file:mycatalog.xml"

  # (b) ORACLE
  #replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_BTAU"    
  #replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"            
  #replace CondDBCommon.DBParameters.authenticationPath = "/afs/cern.ch/cms/DB/conddb"

  # (c) FRONTIER
  replace CondDBCommon.connect = "frontier://FrontierDev/CMS_COND_BTAU"
  replace CondDBCommon.catalog = ""
  replace CondDBCommon.DBParameters.authenticationPath = ""
  replace CondDBCommon.DBParameters.loadBlobStreamer = true

  es_source = PoolDBESSource { 
    using CondDBCommon
    VPSet toGet = { { string record = "CombinedTauTagRcd" string tag = "combinedtautag_likelihoodratioPDFs_0" } }
    untracked bool siteLocalConfig = true    # set true when FRONTIER used 
  }
  ##### End - config of Conditions DB #############################################################

  include "RecoTauTag/RecoTau/data/tauCaloProducer.cfi"
  include "RecoTauTag/RecoTau/data/discriminationByIsolation.cff"
  
  module caloTauTest = CaloTauTest{
    string CaloTaus = "tauCaloProducer" 
    string TauDiscriminatorByIsolationProducer = "discriminationByIsolation"
  }

  # module execution
  path p={coneIsolation,combinedTauTag,tauCaloProducer,discriminationByIsolation,caloTauTest}
}
